@using OfferVerse.ViewModels
@model FinalizeServiceViewModel

<h2 class="my-5">
    You can either review or report @Model.ServiceDemanded.ServiceProvider.LastName.ToUpper() 
    @Model.ServiceDemanded.ServiceProvider.FirstName[0].ToString().ToUpper()@Model.ServiceDemanded.ServiceProvider.FirstName.Substring(1)
</h2>

<div class="d-flex align-items-center justify-content-center gap-5 my-5">
    <p class="h3">Review</p>
    <label class="switch" id="switch">
        <input class="cb" type="checkbox" />
        <span class="toggle">
            <span class="left">←</span>
            <span class="right">→</span>
        </span>
    </label>
    <p class="h3">Report</p>
</div>


<div id="review">
    <h3>You are reviewing </h3>
    <form method="post" asp-action="FinalizeService-Commentary">
        <table class ="table table-striped table-bordered table-hover">
            <tr>
                <th class="w-25">
                    <label asp-for="@Model.Commentary.Content"></label>
                </th>
                <td class="w-50">
                    <textarea asp-for="@Model.Commentary.Content" class="form-control"></textarea>
                </td>
                <td class="w-25">
                    <span asp-validation-for="@Model.Commentary.Content" class="text-danger px-2"></span>
                </td>
            </tr>
            <tr>
                <th>
                    <label asp-for="@Model.Commentary.Rating"></label>
                </th>
                <td class="d-flex align-content-center">
                    <p id="rating" class="my-auto mx-4 fs-3 w-25 text-center">0</p>
                    <input asp-for="@Model.Commentary.Rating" type="range" min="0" max="5" class="form-control" style="cursor: pointer;" id="input-rating"/>
                </td>
                <td>
                    <span asp-validation-for="@Model.Commentary.Rating" class="text-danger px-2"></span>
                </td>
            </tr>
            <tr>
                <th>
                    <label asp-for="@Model.ServiceDemanded.NbHours"></label>
                </th>
                <td class ="d-flex align-content-center">
                    <p id="hours" class="my-auto mx-4 fs-3 w-25 text-center">1</p>
                    <input asp-for="@Model.ServiceDemanded.NbHours" type="range" min="1" max="200" class="form-control" style="cursor: pointer;" name="nbHours" id="input-hours" />
                </td>
                <td>
                    <span asp-validation-for="@Model.ServiceDemanded.NbHours" class="text-danger px-2"></span>
                </td>
            </tr>
        </table>
        <input type="hidden" name="serviceId" value="@Model.ServiceDemanded.ServiceId"/>
        <div class="d-flex gap-xl-5 justify-content-start">
            <a asp-action="ShowInProgressServices" class="btn btn-dark my-2 p-2 px-4 w-25">Back</a>
            <input type="submit" value="Validate" class="btn btn-success my-2 p-2 px-4 w-25" />
        </div>
    </form>
</div>

<div id="report" style="display: none;">
    <h3>You are reporting</h3>
    <p class="alert alert-danger">
        Reporting a user is not something we take lightly. To report a user, 
        your motivations must be purely objective. 
        If after investigation we determine that you have abused of the
        report for revenge or anything else that would harm our users' 
        experience, you will be banned from OfferVerse for life. 
        Strongly consider your decision before deferring to a user.
    </p>
    <form method="post" asp-action="FinalizeService-Report">
        <table class="table table-striped table-bordered table-hover">
            <tr>
                <th class="w-25">
                    <label asp-for="@Model.Report.Title"></label>
                </th>
                <td>
                    <input asp-for="@Model.Report.Title" class="form-control" />
                </td>
                <td class="w-50">
                    <span asp-validation-for="@Model.Report.Title" class="text-danger px-2"></span>
                </td>
            </tr>
            <tr>
                <th>
                    <label asp-for="@Model.Report.Description"></label>
                </th>
                <td>
                    <textarea asp-for="@Model.Report.Description" class="form-control"></textarea>
                </td>
                <td>
                    <span asp-validation-for="@Model.Report.Description" class="text-danger px-2"></span>
                </td>
            </tr>
        </table>
        <input type="hidden" name="serviceId" value="@Model.ServiceDemanded.ServiceId" />
        <div class="d-flex gap-xl-5 justify-content-start">
            <a asp-action="ShowInProgressServices" class="btn btn-dark my-2 p-2 px-4 w-25">Back</a>
            <input type="submit" value="Validate" class="btn btn-success my-2 p-2 px-4 w-25" />
        </div>
    </form>
</div>


<script defer>
    const showReportFormByDefault = @(ViewData.ContainsKey("ReportFormSubmittedWithErrors") ? "true" : "false");
</script>
<script src="~/js/FinalizeService.js" defer></script>
<link rel="stylesheet" href="~/css/FinalizeService.css"></link>
